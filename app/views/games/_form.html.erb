<%= form_for(@game) do |f| %>
  <% if @game.errors.any? %>
    <div id="error" class="ui-bar-b ui-bar ui-corner-all">
      <p><%= pluralize(@game.errors.count, "error") %> prohibited this game from being saved:</p>

      <ul>
      <% @game.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="ui-body">
    <%= f.label :name %>
    <%= f.text_field :name %>
  </div>

  <div class="ui-body">
    <%= f.label :max_players %>
    <%= f.number_field :max_players %>
  </div>

  <div class="role-fields ui-body">
    <div class="ui-grid-a ui-responsive">
      <div class="ui-block-a">
        <label>Roles</label>
      </div>
      <div class="ui-block-b">
        <%= button_tag 'Add', 'id' => 'add-role', 'data-icon' => 'plus', 'data-inline' => 'true', 'data-mini' => 'true', 'type' => 'button'  %>
      </div>
    </div>
    <%= f.fields_for :roles do |r| %>
      <div class="role-field ui-grid-a ui-responsive">
        <div class="ui-block-a">
          <%= r.text_field :name %>
        </div>
        <div class="ui-block-b">
          <%= r.hidden_field :_destroy %>
          <%= button_tag 'Remove', 'class' => 'remove-role', 'data-icon' => 'minus', 'data-inline' => 'true', 'data-mini' => 'true', 'type' => 'button' %>
        </div>
      </div>
    <% end %>
  </div>

  <div class="actions">
    <%= f.submit %>
  </div>
<% end %>
